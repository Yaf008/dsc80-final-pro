<!DOCTYPE html>
<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <title>
   Explore the relationship between calories and ratings in a diet
  </title>
  <style>
   body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        header, section {
            padding: 20px;
            margin: 10px;
        }
        header {
            background-color: #f4f4f4;
            border-bottom: 1px solid #ddd;
        }
        h1, h2 {
            color: #333;
        }
        p {
            text-indent: 2em;
        }
        ul {
            margin-left: 20px;
        }
  </style>
 </head>
 <body>
  <header style="background-color: #e0f7e0; padding: 20px; border-bottom: 2px solid #ccc;">
   <h1 style="color: lightgreen;">
    Explore the relationship between calories and ratings in a diet
   </h1>
   <p>
    Author：Yajing Fang
   </p>
  </header>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Overview
   </h2>
   <p>
    This data science project was conducted by the University of California, San Diego (UCSD) to explore the relationship between recipe ratings and their calorie ratio.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Introduction
   </h2>
   <h2 style="color: lightgreen;">
    Data Set Introduction
   </h2>
   <p>
    My dataset comes from
    <a href="https://www.food.com" target="_blank">
     Food.com
    </a>
    , which contains recipes and user ratings. This dataset records various types of recipes and their corresponding ratings and calorie information. At the heart of my project was the question:
    <strong>
     What is the relationship between a recipe's rating and its calorie content?
    </strong>
    I wanted to explore modern eating habits and see if people tend to give high marks to low-calorie recipes or whether high-calorie recipes are more popular.
   </p>
   <p>
    The first dataset recipe contains 83782 rows representing 83782 unique recipes, with 10 columns recording the following information:
   </p>
   <table border="1" style="width: 100%; border-collapse: collapse; margin: 20px 0; font-family: Arial, sans-serif;">
    <thead>
     <tr style="background-color: #f9f9f9;">
      <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
       Column
      </th>
      <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'name'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Recipe name
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'id'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Recipe ID
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'minutes'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Minutes to prepare recipe
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'contributor_id'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       User ID who submitted this recipe
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'submitted'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Date recipe was submitted
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'tags'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Food.com tags for recipe
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'nutrition'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Nutrition information in the form [calories (#), total fat (PDV), sugar (PDV), sodium (PDV), protein (PDV), saturated fat (PDV), carbohydrates (PDV)]; PDV stands for "percentage of daily value"
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'n_steps'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Number of steps in recipe
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'steps'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Text for recipe steps, in order
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'description'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       User-provided description
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       'ingredients'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Text for recipe ingredients
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       'n_ingredients'
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Number of ingredients in recipe
      </td>
     </tr>
    </tbody>
   </table>
   <p>
    The second dataset, interactions, contains 731927 rows and each row contains a review from the user on a specific recipe. The columns it includes are:
   </p>
   <table border="1" style="width: 100%; border-collapse: collapse; margin: 20px 0; font-family: Arial, sans-serif;">
    <thead>
     <tr style="background-color: #f9f9f9;">
      <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
       Column
      </th>
      <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
       Description
      </th>
     </tr>
    </thead>
    <tbody>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       <code>
        'user_id'
       </code>
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       User ID
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       <code>
        'recipe_id'
       </code>
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Recipe ID
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       <code>
        'date'
       </code>
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Date of interaction
      </td>
     </tr>
     <tr style="background-color: #f9f9f9;">
      <td style="padding: 10px; border: 1px solid #ccc;">
       <code>
        'rating'
       </code>
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Rating given
      </td>
     </tr>
     <tr>
      <td style="padding: 10px; border: 1px solid #ccc;">
       <code>
        'review'
       </code>
      </td>
      <td style="padding: 10px; border: 1px solid #ccc;">
       Review text
      </td>
     </tr>
    </tbody>
   </table>
   <h4>
    Based on the data set, we are looking at how different factors affect the calorie content of recipes. For research purposes, we split the values in the "nutrition" column into corresponding separate columns, such as "calories," "total fat," and so on

    In addition, we grouped the calorie content in a given recipe into four major groups 'Low[0,400)', 'Medium[400,700)', 'High[700,1000)', 'Very High '. The columns most relevant to answering our question were 'calories ',' sugar ', 'total fat ', and' sugar '. "Protein" and other nutrients, as well as recipe preparation details such as "n_steps" and "cooking_duration_encoded" (encoding cooking time).

    By using our model to predict the calorie content of recipes, we can gain insight into the factors that have the biggest impact on calorie changes. This information can help recipe contributors on Food.com modify and improve their recipes in line with public health interests, such as providing healthier, lower-calorie alternatives. In addition, these insights could lead to future research exploring how the complexity of recipe composition and preparation affects calorie content, and how this affects people's dietary choices and health awareness.
   </h4>
   <h3>
    Why is this a concern?
   </h3>
   <p>
    This question is especially important in these days of health and eating habits. By analyzing this relationship, we can better understand current food preferences and help the restaurant industry, health advocates, and everyday users fine-tune diet recommendations and choices.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Data Cleaning and Exploratory Data Analysis
   </h2>
   <p>
    In order to improve the efficiency and convenience of data analysis, we have carried out the following data cleansing steps:
   </p>
   <ul>
    <li>
     1.Left-concatenate the recipe and interaction data sets on id and recipe_id.
    </li>
    <li>
     2.Populate all values rated 0 with np.nan.
    </li>
    <li>
     3.Add columns that contain the average rating for each recipe.
    </li>
    <li>
     4.The values in the nutrition column are split into separate columns and converted to floating-point numbers.
    </li>
    <li>
     5.The calorie columns were grouped into four major groups: 'Low[0,400)', 'Medium[400,700)', 'High[700,1000)', 'Very High[1000,45609]']
    </li>
    <li>
     6.Also on the cooking duration of grouping: [' Short [0, 30) ', 'Medium [30, 60)', 'Long [60118]']
    </li>
    <li>
     7.Add 'rating_missing' : A Boolean value column is added to determine whether the rating is missing
    </li>
    <li>
     8.In order to convert the grouped recipe preparation time into hot encode, we added three more Boolean values to determine the minutes in that interval
    </li>
    <li>
     9.Add 'cooking_duration_encoded' : Assign three groups in cooking durations
    </li>
    <head>
     <meta charset="utf-8"/>
     <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
     <title>
      Cleaned DataFrame Columns
     </title>
     <style>
      table {
            border-collapse: collapse;
            width: 100%;
            font-family: Arial, sans-serif;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
     </style>
    </head>
    <body>
     <h1 style="color: lightgreen;">
      Columns of the Cleaned DataFrame
     </h1>
     <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-family: Arial, sans-serif;">
      <thead>
       <tr style="background-color: #f9f9f9;">
        <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
         Column
        </th>
        <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
         Description
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'name'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'id'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'minutes'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'contributor_id'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64r
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'submitted'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         DateTime
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'tags'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'n_steps'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64r
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'steps'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'description'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'ingredients'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'n_ingredients'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'user_id'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'recipe_id'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'date'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         DateTime
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'rating'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'review'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'average rating'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'calories'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'total_fat'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'sugar'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'sodium'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'protein'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'saturated_fat'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'carbohydrates'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         float64
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'calorie_bins'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'rating_missing'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         bool
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'cooking_duration_long'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         bool
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'cooking_duration_medium'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         bool
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'cooking_duration_short'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         bool
        </td>
       </tr>
       <tr style="background-color: #f9f9f9;">
        <td style="padding: 10px; border: 1px solid #ccc;">
         'cooking_duration'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         object
        </td>
       </tr>
       <tr>
        <td style="padding: 10px; border: 1px solid #ccc;">
         'cooking_duration_encoded'
        </td>
        <td style="padding: 10px; border: 1px solid #ccc;">
         int64
        </td>
       </tr>
      </tbody>
     </table>
    </body>
    <head>
     <meta charset="utf-8"/>
     <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
     <title>
      Cleaned DataFrame Table
     </title>
     <style>
      body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .table-container {
            width: 100%;
            overflow-x: auto; /* 添加水平滚动 */
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            white-space: nowrap; /* 防止内容换行 */
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f4f4f4;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
     </style>
    </head>
    <body>
     <h1 style="color: lightgreen;">
      Cleaned DataFrame Table
     </h1>
     <div style="width: 100%; overflow-x: auto; margin: 20px 0;">
      <table style="width: 100%; border-collapse: collapse; margin: 20px 0; font-family: Arial, sans-serif;">
       <thead>
        <tr style="background-color: #f9f9f9;">
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          name
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          id
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          minutes
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          contributor_id
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          submitted
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          tags
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          n_steps
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          steps
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          description
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          ingredients
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          protein
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          saturated_fat
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          carbohydrates
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          calorie_bins
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          rating_missing
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          cooking_duration_long
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          cooking_duration_medium
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          cooking_duration_short
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          cooking_duration
         </th>
         <th style="background-color: #e0f7e0; padding: 10px; border: 1px solid #ccc;">
          cooking_duration_encoded
         </th>
        </tr>
       </thead>
       <tbody>
        <tr>
         <td style="padding: 10px; border: 1px solid #ccc;">
          impossible macaroni and cheese pie
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          275022
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          50
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          531768
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          2008-01-01
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['60-minutes-or-less', 'time-to-make', 'course...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          11
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['heat oven to 400 degrees fahrenheit', 'greas...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          one of my mom's favorite bisquick recipes...
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['cheddar cheese', 'macaroni', 'milk', 'eggs',...]
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          41.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          62.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          8.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          Low[0,400)
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          True
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          medium
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          1
         </td>
        </tr>
        <tr style="background-color: #f9f9f9;">
         <td style="padding: 10px; border: 1px solid #ccc;">
          impossible macaroni and cheese pie
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          275022
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          50
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          531768
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          2008-01-01
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['60-minutes-or-less', 'time-to-make', 'course...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          11
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['heat oven to 400 degrees fahrenheit', 'greas...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          one of my mom's favorite bisquick recipes...
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['cheddar cheese', 'macaroni', 'milk', 'eggs',...]
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          41.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          62.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          8.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          Low[0,400)
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          True
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          medium
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          1
         </td>
        </tr>
        <tr>
         <td style="padding: 10px; border: 1px solid #ccc;">
          impossible rhubarb pie
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          275024
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          55
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          531768
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          2008-01-01
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['60-minutes-or-less', 'time-to-make', 'course...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          6
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['heat oven to 375 degrees', 'grease 10" pan ,...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          a childhood favorite of mine. my mom loved it...
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['rhubarb', 'eggs', 'bisquick', 'butter', 'sal...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          13.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          30.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          20.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          Low[0,400)
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          True
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          medium
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          1
         </td>
        </tr>
        <tr style="background-color: #f9f9f9;">
         <td style="padding: 10px; border: 1px solid #ccc;">
          impossible seafood pie
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          275026
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          45
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          531768
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          2008-01-01
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['60-minutes-or-less', 'time-to-make', 'course...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          7
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['preheat oven to 400f', 'lightly grease large...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          this is an oldie but a goodie. mom's stand by...
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          ['frozen crabmeat', 'sharp cheddar cheese', 'c...']
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          37.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          51.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          5.0
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          Low[0,400)
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          True
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          False
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          medium
         </td>
         <td style="padding: 10px; border: 1px solid #ccc;">
          1
         </td>
        </tr>
       </tbody>
      </table>
     </div>
    </body>
    <h1 style="color: lightgreen;">
     Univariate Analysis
    </h1>
    <img height="auto" src="images/calories_dis.png" width="800"/>
    <p>
     As you can see, the distribution is skewed to theright. Some recipes have unimaginable calorie content, but these are very few. The vast majority of calories are in the 200-500 calorie range.
    </p>
    <img height="auto" src="images/averagerating_dis.png" width="800"/>
    <p>
     From this average rating distribution map, most of the ratings are concentrated near the position of 5 points, especially the number of 5 points is far more than other ratings, which indicates that the overall satisfaction of users is high, or there is a phenomenon of high ratings. Low ratings, such as below 2, are relatively rare, indicating that very few users give extremely low scores. This distribution may reflect the influence of rating bias or scoring mechanism. In addition, there were small spikes in certain scores such as 4 and 3. It is recommended to further analyze the time trend of review content or ratings to gain a deeper understanding of user feedback and optimize the rating mechanism to more accurately reflect the user experience.
    </p>
    <h1 style="color: lightgreen;">
     Bivariate Analysis
    </h1>
    <img height="auto" src="images/Avgrating_Ca.png" width="800"/>
    <p>
     Observation results: Most recipes are low in calories, concentrated in the O to 10,000 range.  A large number of ratings are concentrated between 4 and 5 points.  As the score approached 5, some recipes appeared that were very high in calories (over 20,000 calories).  Recipes with low ratings (near 0 to 1) usually have lower calorie values.  Conclusion: Highly rated recipes are sometimes accompanied by extremely high calorie content.  Low-rated recipes are rarely seen in the high-calorie range, which may indicate that people are less receptive to low-rated, high-calorie recipes.  The scatter plot shows that recipes with scores above 4 are mainstream, but the calorie distribution is very wide.
    </p>
    <img height="auto" src="images/rate_ca_box.png" width="800"/>
    <p>
     Observation results: The recipes were divided into four calorie levels: Low [0-400), Medium [400-700), High[700-1000), and Very High [1000 +). The distribution of scores for each calorie category wasconcentrated in the higher rating range, with most scores around 4 points. The median scores for eachcalorie category were very close, with little difference in scores. Across all calorie levels, there were somelow-scoring outliers. Conclusion: The relationship between calorie content and ratings did not appear tobe significant, and the distribution of ratings for recipes with different calorie levels was relativelyconsistent. Both low - and high-calorie recipes are likely to receive high ratings, suggesting that ratingsmay depend more on other aspects of the recipe (e.g. taste, ingredients, cooking methods. etc.).
    </p>
    <h1 style="color: lightgreen;">
     Interesting Aggregates
    </h1>
    <p>
     I removed outliers from the dataset by calculating the first (Q1) and third quartiles (Q3) of the 'minutes' column and using the interquartile range (IQR) to set lower and upper bounds. After filtering out values beyond these bounds, you divided the remaining data into three cooking time groups: short (0-30 minutes), medium (30-60 minutes), and long (60+ minutes). You then calculated the average calories for each group and visualized the results with a bar chart, adding appropriate titles and labels to illustrate the average calories by cooking time groups.
    </p>
    <img height="auto" src="images/cook_duration.png" width="800"/>
   </ul>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h1 style="color: lightgreen;">
    Assessment of Missingness
   </h1>
   <p>
    The merged dataset contains a significant number of missing values in the 'date', 'rating', and 'review' columns. Therefore, we decided to evaluate the extent of missing data in the dataframe.
   </p>
   <h2 style="color: lightgreen;">
    NMAR Analysis
   </h2>
   <p>
    We believe that the missingness in the 'review' column is NMAR because individuals are less likely to leave a review if they feel indifferent about the recipe, as they may not find anything particularly noteworthy to share. People typically leave reviews when they experience stronger emotions towards a recipe, whether positive or negative. For instance, someone who finds the recipe exceptionally delicious or faces a significant failure in executing it is more likely to leave a review, motivated by their strong reaction. In contrast, if the recipe outcome is merely average, they may not feel compelled to provide feedback. This emotional engagement drives users to take the time to visit the page, click through multiple buttons, and write a review.
   </p>
   <h2 style="color: lightgreen;">
    Missingness Dependency
   </h2>
   <p>
    I examine the dependence between the lack of rating and the minutes (cooking time). A Permutation Test was used in the code to calculate the actual mean differences, and the distribution of mean differences for the permutation samples was estimated by randomly rearranging the data several times.
   </p>
   <h1 style="color: lightgreen;">
    Hypotheses and Test Details
   </h1>
   <h2 style="color: lightgreen;">
    1.Rating and Cooking time -- Hypotheses:
   </h2>
   <ul>
    <li>
     <strong>
      Null Hypothesis:
     </strong>
     The missingness of ratings is independent of the cooking time (i.e., missing ratings do not depend on the cooking time).
    </li>
    <li>
     <strong>
      Alternate Hypothesis:
     </strong>
     The missingness of ratings depends on the cooking time.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Test Statistic:
   </h2>
   <p>
    The test statistic used is the absolute mean difference in cooking time between the group with missing ratings and the group without missing ratings.
   </p>
   <h2 style="color: lightgreen;">
    Permutation Test Visualization:
   </h2>
   <img height="auto" src="images/AMD_rating_cooktine.png" width="800"/>
   <h1 style="color: lightgreen;">
    Hypothesis Test Result
   </h1>
   <h2 style="color: lightgreen;">
    Summary:
   </h2>
   <p>
    The permutation test resulted in a
    <strong>
     p-value of 0.717
    </strong>
    .
   </p>
   <h2 style="color: lightgreen;">
    Interpretation:
   </h2>
   <p>
    Since the p-value (
    <strong>
     0.717
    </strong>
    ) is greater than the significance level (
    <strong>
     0.05
    </strong>
    ), we
    <strong>
     fail to reject the null hypothesis
    </strong>
    .
   </p>
   <h2 style="color: lightgreen;">
    Conclusion:
   </h2>
   <p>
    There is
    <strong>
     no significant evidence
    </strong>
    to suggest that the missingness of ratings depends on the cooking time. The missingness of ratings appears to be
    <strong>
     independent
    </strong>
    of the cooking time.
   </p>
   <h2 style="color: lightgreen;">
    2.Rating and saturated_fat -- Hypotheses:
   </h2>
   <ul>
    <li>
     <strong>
      Null Hypothesis:
     </strong>
     The missingness of ratings is independent of the saturated fat content (i.e., missing ratings do not depend on the saturated fat content).
    </li>
    <li>
     <strong>
      Alternate Hypothesis:
     </strong>
     The missingness of ratings depends on the saturated fat content.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Test Statistic:
   </h2>
   <p>
    The test statistic used is the absolute mean difference in saturated fat content between the group with missing ratings and the group without missing ratings.
   </p>
   <h2 style="color: lightgreen;">
    Permutation Test Visualization:
   </h2>
   <img alt="Permutation Test Visualization for Saturated Fat" height="auto" src="images/AMD_rating_fat.png" width="800"/>
   <h1 style="color: lightgreen;">
    Hypothesis Test Result
   </h1>
   <h2 style="color: lightgreen;">
    Summary:
   </h2>
   <p>
    The permutation test resulted in a
    <strong>
     p-value of 0.042
    </strong>
    .
   </p>
   <h2 style="color: lightgreen;">
    Interpretation:
   </h2>
   <p>
    Since the p-value (
    <strong>
     0.042
    </strong>
    ) is less than the significance level (
    <strong>
     0.05
    </strong>
    ), we
    <strong>
     reject the null hypothesis
    </strong>
    .
   </p>
   <h2 style="color: lightgreen;">
    Conclusion:
   </h2>
   <p>
    There is
    <strong>
     significant evidence
    </strong>
    to suggest that the missingness of ratings depends on the saturated fat content.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Hypotheses Testing: Calories and Rating Correlation Analysis
   </h2>
   <ul>
    <li>
     <strong>
      Null Hypothesis:
     </strong>
     There is no correlation between the calories and the average rating.
    </li>
    <li>
     <strong>
      Alternate Hypothesis:
     </strong>
     There is a correlation between the calories and the average rating.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Results:
   </h2>
   <ul>
    <li>
     <strong>
      Pearson Correlation Coefficient:
     </strong>
     -0.029353990804797694
    </li>
    <li>
     <strong>
      P-Value:
     </strong>
     7.33898944571452e-46
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Interpretation:
   </h2>
   <p>
    Since the p-value (
    <strong>
     7.33898944571452e-46
    </strong>
    ) is less than the significance level (
    <strong>
     0.05
    </strong>
    ), we
    <strong>
     reject the null hypothesis
    </strong>
    .
   </p>
   <h2 style="color: lightgreen;">
    Conclusion:
   </h2>
   <p>
    1.Reject the null hypothesis (Calories and Average Ratings are independent) :
   </p>
   <p>
    Since the P-value is very small, we reject the null hypothesis and suggest that there is some statistical correlation between calories and ratings.
   </p>
   <p>
    2.The correlation is weak:
   </p>
   <p>
    Although statistically significant, the correlation coefficient is only -0.029, indicating that the association is insignificant in practice. Calorie content had a negligible effect on ratings.
   </p>
   <h2 style="color: lightgreen;">
    Scatter Plot Visualization:
   </h2>
   <img alt="Scatter Plot of Calories vs Average Rating" height="auto" src="images/correaltion.png" width="800"/>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Framing a Prediction Problem
   </h2>
   <p>
    We plan to predict the calorie content of a recipe, which is a regression problem since calories are a continuous variable. Our goal is to build a regression model that predicts calorie values based on the ingredients of a recipe.
   </p>
   <p>
    Prediction Problem Type: Regression 1.Response Variable: The variable we aim to predict is the calorie content of the recipe. 2.Reason for Selection: Calorie content directly reflects the energy level of a recipe, which is crucial for assessing its healthiness. Understanding the calories in a recipe helps people make informed dietary choices and avoid excessive calorie intake.
   </p>
   <p>
    Evaluation Metrics We will use the following metrics to evaluate the performance of the regression model:
   </p>
   <p>
    1.Mean Squared Error (MSE)
   </p>
   <p>
    Reason: MSE measures the average squared difference between predicted and actual values. It is effective in capturing large errors, penalizing predictions that deviate significantly from actual values, and helps optimize the model's accuracy.
   </p>
   <p>
    2.Root Mean Squared Error (RMSE)
   </p>
   <p>
    Reason: RMSE is the square root of MSE, maintaining the same unit as the response variable, making it easier to interpret. It provides a clear measure of the magnitude of prediction errors. We chose these regression metrics instead of classification metrics (e.g., accuracy or F1 score) because our response variable is continuous rather than categorical. These metrics effectively quantify the difference between continuous predicted values and actual values.
   </p>
   <p>
    By building this regression model, we aim to help users quickly understand the calorie content of recipes, enabling them to make healthier dietary choices.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    Baseline Model
   </h2>
   <p>
    The baseline model uses a Random Forest Regressor to predict recipe calorie content based on four features: n_steps, total_fat, sugar, and cooking_duration_encoded (an ordinal feature representing cooking duration categorized as long, medium, or short).
   </p>
   <p>
    The features were scaled using StandardScaler within a Pipeline. The model achieved a Mean Squared Error (MSE) of 14117.43, a Root Mean Squared Error (RMSE) of 118.82, and an R² Score of 0.96, indicating that it explains 96% of the variance in calorie content.
   </p>
   <p>
    While the high R² score shows strong predictive performance, the RMSE suggests room for improvement, particularly for recipes with extreme calorie values. Adding more relevant features and tuning model hyperparameters could further enhance the model's accuracy.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    <strong>
     Final Model
    </strong>
   </h2>
   <h1 style="color: lightgreen;">
    Features Added and Their Relevance
   </h1>
   <p>
    In the final model, the following features were used to predict the calorie content of recipes:
   </p>
   <h2 style="color: lightgreen;">
    <strong>
     total_fat
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Represents the total fat content in a recipe.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Fat contributes significantly to calorie count, providing 9 calories per gram. Including this feature helps the model capture the calorie contribution from fats.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     sugar
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Represents the sugar content in the recipe.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Sugar is a carbohydrate and contributes 4 calories per gram. Recipes high in sugar tend to have higher calorie content.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     sodium
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Represents the sodium content in a recipe.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     While sodium itself doesn’t add calories, it often correlates with processed and high-fat foods, indirectly affecting calorie content.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     protein
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Represents the protein content in a recipe.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Protein contributes 4 calories per gram. High-protein recipes can impact the overall calorie prediction.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     saturated_fat
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     A subset of total fat representing the amount of saturated fat.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Helps distinguish between different types of fat, offering more detailed insights into the fat profile of a recipe.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     carbohydrates
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Total carbohydrate content in the recipe.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Carbohydrates contribute 4 calories per gram and are a primary source of energy in many recipes.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     n_steps
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Number of steps in the recipe preparation.
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Recipes with more preparation steps tend to be more complex and may involve richer ingredients, which could impact calorie content.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     cooking_duration_encoded
    </strong>
   </h2>
   <ul>
    <li>
     <strong>
      Description:
     </strong>
     Encoded cooking duration categorized as:
     <ul>
      <li>
       0: Long
      </li>
      <li>
       1: Medium
      </li>
      <li>
       2: Short
      </li>
     </ul>
    </li>
    <li>
     <strong>
      Reasoning:
     </strong>
     Longer cooking durations may be associated with recipes that use more ingredients or richer cooking methods, affecting calorie content.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    <strong>
     Modeling Algorithm and Hyperparameters Algorithm:
    </strong>
   </h2>
   <p>
    Random Forest Regressor was chosen for its ability to handle complex, non-linear relationships and its robustness to overfitting when tuned properly.
   </p>
   <h2 style="color: lightgreen;">
    Final Hyperparameters:
   </h2>
   <ul>
    <li>
     <strong>
      n_estimators:
     </strong>
     100
    </li>
    <li>
     <strong>
      random_state:
     </strong>
     42 (for reproducibility)
    </li>
   </ul>
   <p>
    These hyperparameters were chosen to balance model performance and computation time. Further tuning (e.g., with
    <code>
     GridSearchCV
    </code>
    ) can refine these parameters, but the current values provide a solid baseline for performance.
   </p>
  </section>
  <section style="padding: 20px; border: 1px solid #ddd; margin: 20px 0; border-radius: 5px; background-color: #fdfdfd;">
   <h2 style="color: lightgreen;">
    <strong>
     Fairness Analysis
    </strong>
   </h2>
   <h2 style="color: lightgreen;">
    Hypotheses:
   </h2>
   <ul>
    <li>
     <strong>
      Null Hypothesis (H₀):
     </strong>
     The model has no significant difference in performance between short-duration and long-duration recipes. The observed RMSE difference is due to random chance.
    </li>
    <li>
     <strong>
      Alternative Hypothesis (H₁):
     </strong>
     The RMSE for short-duration recipes is significantly higher than that for long-duration recipes, indicating worse model performance for short-duration recipes.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Process:
   </h2>
   <ol>
    <li>
     Split the test set into two groups based on
     <code>
      cooking_duration_encoded
     </code>
     (short-duration and long-duration).
    </li>
    <li>
     Calculate the RMSE for both groups:
    </li>
    <ul>
     <li>
      <strong>
       RMSE for Short-Duration Recipes:
      </strong>
      33.18
     </li>
     <li>
      <strong>
       RMSE for Long-Duration Recipes:
      </strong>
      55.22
     </li>
    </ul>
    <li>
     Define a function to calculate the RMSE difference between the two groups.
    </li>
    <li>
     Run a permutation test with 1,000 permutations to generate the null distribution of RMSE differences.
    </li>
    <li>
     Calculate the p-value by comparing the observed RMSE difference to the null distribution.
    </li>
   </ol>
   <h2 style="color: lightgreen;">
    Results:
   </h2>
   <ul>
    <li>
     <strong>
      Actual RMSE Difference:
     </strong>
     Calculated using the observed data.
    </li>
    <li>
     <strong>
      P-Value:
     </strong>
     The p-value was less than 0.05.
    </li>
   </ul>
   <h2 style="color: lightgreen;">
    Conclusion:
   </h2>
   <p>
    Since the p-value is less than the significance level (0.05), we reject the null hypothesis. This indicates a significant difference in the model's performance between short-duration and long-duration recipes. The results suggest potential unfairness in the model's performance.
   </p>
   <h2 style="color: lightgreen;">
    Visualization:
   </h2>
   <p>
    Below is the histogram of the permuted RMSE differences and the observed RMSE difference:
   </p>
   <img alt="Permutation Test RMSE Visualization" height="auto" src="images/fairness.png" width="800"/>
  </section>
 </body>
</html>
